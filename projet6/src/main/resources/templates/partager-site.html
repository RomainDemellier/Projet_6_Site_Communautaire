<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Partager un site</title>

    <link rel="stylesheet" th:href="@{/webjars/bootstrap/4.2.1/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/style-login.css}"/>

</head>

<body>

<div class="container">
    <div class="row">
        <form action="#" th:action="@{partager-site}" th:object="${site}" method="post" id="formPartager" class="col-lg-5 offset-lg-4" >
            <div  th:if="${ erreur != null }" class="text-center">
                <small id="erreur" th:text="${ erreur }"></small>
            <hr>
            </div>
            <h3 class="titreForm">Partager</h3>
            <div class="form-group">
                <!-- <label for="pays">Pays : </label> -->
                <select name="pays" id="pays" class="col-lg-12 custom-select" th:field="*{nomPays}" onchange="handleOnChange()">
                    <option value="0">Pays</option>
                    <option th:value="${pays.nom}" th:each="pays : ${listePays}" th:text="${pays.nom}" th:selected="${site.nomPays == pays.nom}"></option>
                </select>
            </div>
            <div class="form-group">
                <!-- <label for="departement">Département : </label> -->
                <select name="departement" id="departement" class="col-lg-12 custom-select" th:field="*{nomDepartement}">
                    <option value="0" id="depByDefault">Département</option>
                    <option th:each="departement : ${listeDepartements}" th:text="${departement.nom}"
                            th:value="${departement.nom}" th:selected="${departement.nom == site.nomDepartement}">
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="nom">Nom du site : </label>
                <input type="text" class="form-control" id="nom" name="nom" placeholder="Nom du site" th:value="${ site.nom }" th:field="*{nom}"/>
            </div>
            <div class="form-group">
                <!-- <label for="type">Type : </label> -->
                <select name="type" id="type" class="col-lg-12 custom-select" th:field="*{type}">
                    <option value="0">Type</option>
                    <option th:each="type : ${listeTypes}" th:text="${ type.nom }" th:value="${ type.nom }" th:selected="${ site.type == type.nom }"></option>
                </select>
            </div>
            <div class="form-group">
                <label for="hauteur">Hauteur : </label>
                <input type="text" class="form-control" id="hauteur" name="hauteur" placeholder="Hauteur" th:value="${ site.hauteur }" th:field="*{hauteur}"/>
            </div>
            <div class="form-group">
                <label for="orientation">Orientation : </label>
                <input type="text" class="form-control" id="orientation" name="orientation" placeholder="Orientation" th:value="${ site.orientation }" th:field="*{orientation}"/>
            </div>
            <div class="form-group">
                <label for="voies">Voies : </label>
                <input type="text" class="form-control" id="voies" name="voies" placeholder="Voies" th:value="${ site.voies }" th:field="*{voies}" />
            </div>
            <div class="form-group">
                <!-- <label for="cotations">Cotations : </label> -->
                <select name="cotations" id="cotations" class="col-lg-12 custom-select" th:field="*{cotations}">
                    <option value="0">Cotations</option>
                    <option th:each="cotation : ${ listeCotations }" th:text="${cotation.difficulte}"
                            th:value="${cotation.difficulte}" th:selected="${ site.cotations == cotation.difficulte }">
                    </option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary" name="validerPartage" value="validerPartage">Valider</button>
        </form>
    </div>
</div>

</main>
<!-- /.container -->

<script type="text/javascript" th:src="@{/webjars/bootstrap/4.2.1/js/bootstrap.min.js}"></script>
<script type="text/javascript">

    var paysElt = document.getElementById("pays");
    var departementElt = document.getElementById("departement");

    function handleOnChange(){
        if(paysElt.value != 1){
            departementElt.setAttribute("disabled","disabled");
        } else {
            departementElt.removeAttribute("disabled");
        }
    }

</script>
</body>
</html>